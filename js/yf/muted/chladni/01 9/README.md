# Генератор фигур Хладни

Интерактивная визуализация реалистичных фигур Хладни с высокой чувствительностью к звуку через микрофон и возможностью добавления интерактивного текста.

![Фигуры Хладни](https://upload.wikimedia.org/wikipedia/commons/6/61/Chladni_patterns_key_of_enlightenment.jpg)

## О проекте

Фигуры Хладни — это визуальная репрезентация стоячих волн на плоской поверхности. Этот проект позволяет создавать реалистичные фигуры Хладни в реальном времени, используя звук с микрофона с повышенной чувствительностью, что позволяет визуализировать даже тихие звуки. Также поддерживается возможность добавления интерактивного текста, который взаимодействует с волновыми паттернами.

Фигуры Хладни вычисляются на основе математических моделей стоячих волн на квадратной мембране с параметрами волновых чисел nx и ny, определяющих количество узловых линий в каждом направлении.

## Как использовать

1. Откройте `index.html` в современном браузере
2. Нажмите кнопку "Начать", чтобы активировать микрофон
3. Говорите, пойте или воспроизводите звуки, чтобы увидеть различные фигуры Хладни
4. Используйте ползунки для регулировки:
   - **Контрастности линий** - настройка резкости контуров
   - **Горизонтальных волновых чисел (nx)** - количество горизонтальных узловых линий
   - **Вертикальных волновых чисел (ny)** - количество вертикальных узловых линий
   - **Чувствительности микрофона** - степень усиления входящего звукового сигнала
   - **Сглаживания анимации** - плавность переходов между состояниями фигур
5. Настраивайте текст на холсте:
   - Введите текст в поле ввода
   - Отрегулируйте размер текста
   - Настройте степень размытия текста
6. Установите флажок "Отключить контраст", чтобы увидеть градиентную версию фигур
7. Нажмите "Инвертировать" для переключения между черными линиями на белом фоне и белыми линиями на черном фоне
8. Нажмите "Остановить", чтобы прекратить запись с микрофона

## Интерактивный текст и фигуры

Текст на холсте взаимодействует с фигурами Хладни следующим образом:
- Текст влияет на амплитуду волн в области его отображения
- Размытие текста создает плавные переходы между текстом и фигурами
- В градиентном режиме особенно хорошо видно, как текст и фигуры влияют друг на друга
- В контрастном режиме текст создает характерные искажения узловых линий

## Адаптивная реакция на звук

Программа использует несколько уровней обработки звука для максимальной отзывчивости:

1. **Усиление сигнала** - слабые сигналы усиливаются, чтобы даже тихие звуки могли создавать выразительные фигуры
2. **Нелинейная нормализация** - для более равномерного отклика по всему звуковому диапазону
3. **Динамический порог** - значение порога автоматически регулируется в зависимости от громкости звука
4. **Сглаживание переходов** - предотвращает резкие скачки при изменении звука

## Технические детали

Проект использует:
- p5.js для визуализации
- p5.sound для анализа звука
- HTML/CSS для пользовательского интерфейса
- FFT (Fast Fourier Transform) с увеличенным разрешением для лучшего анализа звука
- Техники графических буферов для создания эффекта размытия текста

## Математика фигур Хладни

Фигуры Хладни создаются на основе решений волнового уравнения для квадратной мембраны:

```
wave(x, y) = A*sin(nX*PI*x)*sin(nY*PI*y) + B*sin(nY*PI*x)*sin(nX*PI*y)
```

где:
- `nX` — горизонтальное волновое число
- `nY` — вертикальное волновое число
- `A`, `B` — амплитуды соответствующих мод колебаний

Для создания узловых линий применяем пороговую обработку в контрастном режиме:
```
pixel = abs(wave(x, y)) < threshold ? 0 : 255
```

Или отображаем градиентные значения в неконтрастном режиме:
```
pixel = map(abs(wave(x, y)), 0, 1, 0, 255)
```

Физическое объяснение: настоящие фигуры Хладни формируются в точках, где амплитуда колебаний равна нулю (узловые линии). Частицы песка или другого мелкого материала скапливаются вдоль этих линий, создавая характерные геометрические узоры.

## Лицензия

Свободное использование 