<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Void Typeface — Misha Ivanov</title>
    <link rel="stylesheet" href="styles.css">
    <script>
        // Сразу проверить мобильное устройство и скрыть панели до загрузки основного JS
        (function() {
            const width = window.innerWidth;
            const isTouchDevice = 'ontouchstart' in window || navigator.maxTouchPoints > 0;
            const userAgent = navigator.userAgent.toLowerCase();
            const isTablet = /ipad|android(?!.*mobile)|tablet/i.test(userAgent);
            const isMobilePhone = /mobile|iphone|ipod|android.*mobile|blackberry|windows phone/i.test(userAgent);
            const isMobile = (width < 768 && isTouchDevice && !isTablet) || (isMobilePhone && width < 1024);
            
            if (isMobile) {
                document.documentElement.classList.add('is-mobile');
            }
        })();
    </script>
</head>
<body>
    <div class="container">
        <!-- Top Navigation -->
        <div class="top-links">
            <a href="https://mishaivanov.com/void" class="top-link">← About Void</a>
            
            <!-- Preset Dropdown -->
            <div class="preset-dropdown" id="presetDropdown">
                <button class="preset-dropdown-toggle" id="presetDropdownToggle" type="button" aria-haspopup="listbox" aria-expanded="false">
                    <span class="preset-dropdown-text">Default</span>
                    <svg class="preset-dropdown-arrow" width="12" height="8" viewBox="0 0 12 8" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M1 1L6 6L11 1" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
                <ul class="preset-dropdown-menu" id="presetDropdownMenu" role="listbox">
                    <!-- Пресеты будут добавлены динамически -->
                </ul>
            </div>

            <!-- Save Preset Button -->
            <button class="top-link" id="savePresetBtn" type="button" style="display: none;">Save</button>

            <!-- Delete Preset Button -->
            <button class="top-link btn-danger" id="deletePresetBtn" type="button" style="display: none;">Delete</button>
        </div>

        <div class="main-content">
            <!-- Main Canvas -->
            <div class="canvas-container" id="canvasContainer">
                <canvas id="mainCanvas"></canvas>
            </div>

            <!-- Control Panel (справа) -->
            <aside class="controls-panel" id="controlsPanel">
                <div class="panel-header" id="controlsPanelHeader">
                    <span>Metrics</span>
                    <span class="collapse-icon">
                        <svg width="10" height="6" viewBox="0 0 12 8" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M1 1L6 6L11 1" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </span>
                </div>
                <div class="panel-content">
                    <section class="control-section">
                        <!-- Module -->
                        <div class="control-group">
                            <label for="moduleSizeSlider">
                                <span>Module <span class="unit">px</span></span>
                                <input type="text" class="value-display" id="moduleSizeValue" value="24">
                            </label>
                            <input type="range" id="moduleSizeSlider" min="4" max="64" value="24" step="1">
                        </div>

                        <!-- Stem Weight -->
                        <div class="control-group">
                            <label for="stemSlider">
                                <span>Stem Weight <span class="unit">mod</span></span>
                                <input type="text" class="value-display" id="stemValue" value="0.5">
                            </label>
                            <input type="range" id="stemSlider" min="0.1" max="3.0" value="0.5" step="0.1">
                        </div>

                        <!-- Letter Spacing -->
                        <div class="control-group">
                            <label for="letterSpacingSlider">
                                <span>Letter Spacing <span class="unit">mod</span></span>
                                <input type="text" class="value-display" id="letterSpacingValue" value="1">
                            </label>
                            <input type="range" id="letterSpacingSlider" min="0" max="16" value="1" step="1">
                        </div>

                        <!-- Line Height -->
                        <div class="control-group">
                            <label for="lineHeightSlider">
                                <span>Line Height <span class="unit">mod</span></span>
                                <input type="text" class="value-display" id="lineHeightValue" value="2">
                            </label>
                            <input type="range" id="lineHeightSlider" min="0" max="16" value="2" step="1">
                        </div>

                    </section>
                </div>
            </aside>

            <!-- Variability Panel (справа внизу) -->
            <aside class="controls-panel controls-panel-presets" id="variabilityPanel">
                <div class="panel-header" id="variabilityPanelHeader">
                    <span>Variability</span>
                    <span class="collapse-icon">
                        <svg width="10" height="6" viewBox="0 0 12 8" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M1 1L6 6L11 1" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </span>
                </div>
                <div class="panel-content">
                    <section class="control-section">
                        <!-- Render Mode Toggle -->
                        <div class="control-group">
                            <label>Render Mode</label>
                            <fieldset>
                                <div class="segmented-control segmented-control-compact">
                                    <input type="radio" name="renderMethod" value="stroke" id="renderMethodStroke" checked>
                                    <label for="renderMethodStroke">Stroke</label>
                                    
                                    <input type="radio" name="renderMethod" value="fill" id="renderMethodFill">
                                    <label for="renderMethodFill">Fill</label>
                                </div>
                            </fieldset>
                        </div>

                        <!-- Style Toggle -->
                        <div class="control-group" style="margin-top: var(--spacing-2xl);">
                            <label>Style</label>
                            <fieldset>
                                <div class="segmented-control segmented-control-compact">
                                    <input type="radio" name="renderMode" value="fill" id="modeFill" checked>
                                    <label for="modeFill">Solid</label>
                                    
                                    <input type="radio" name="renderMode" value="stripes" id="modeStripes">
                                    <label for="modeStripes">Stripes</label>
                                    
                                    <input type="radio" name="renderMode" value="random" id="modeRandom">
                                    <label for="modeRandom">Random</label>
                                </div>
                            </fieldset>
                        </div>

                        <!-- Rounded Caps (только для Stroke mode, стили Solid и Stripes) -->
                        <div class="control-group" id="roundedCapsControlGroup" style="display: none; margin-top: var(--spacing-2xl);">
                            <label class="checkbox-label" for="roundedCapsCheckbox">
                                <input type="checkbox" id="roundedCapsCheckbox">
                                <span>Rounded Caps</span>
                            </label>
                        </div>

                        <!-- Corner Radius (только для Fill mode, стили Solid и Stripes) -->
                        <div class="control-group" id="cornerRadiusControlGroup" style="display: none; margin-top: var(--spacing-2xl);">
                            <label for="cornerRadiusSlider">
                                <span>Corner Radius <span class="unit">mod</span></span>
                                <input type="text" class="value-display" id="cornerRadiusValue" value="0">
                            </label>
                            <input type="range" id="cornerRadiusSlider" min="0" max="1" value="0" step="0.1">
                        </div>

                        <!-- Strokes Number (только для Stripes mode) -->
                        <div class="control-group" id="strokesControlGroup" style="display: none; margin-top: var(--spacing-2xl);">
                            <label for="strokesSlider">
                                <span>Strokes</span>
                                <input type="text" class="value-display" id="strokesValue" value="2">
                            </label>
                            <input type="range" id="strokesSlider" min="1" max="16" value="2" step="1">
                        </div>

                        <!-- Contrast (только для Stripes mode) -->
                        <div class="control-group" id="strokeGapRatioControlGroup" style="display: none;">
                            <label for="strokeGapRatioSlider">
                                <span>Contrast</span>
                                <input type="text" class="value-display" id="strokeGapRatioValue" value="1.0">
                            </label>
                            <input type="range" id="strokeGapRatioSlider" min="0.1" max="8" value="1.0" step="0.1">
                        </div>

                        <!-- Random Mode Controls -->
                        <div class="control-group" id="randomControlGroup" style="display: none; margin-top: var(--spacing-2xl);">
                            <label class="checkbox-label" for="randomFullRandomCheckbox">
                                <input type="checkbox" id="randomFullRandomCheckbox">
                                <span>Full Random</span>
                            </label>
                        </div>

                        <div class="control-group" id="randomControlGroupStem" style="display: none; margin-top: var(--spacing-2xl);">
                            <label>
                                <span>Stem Weight <span class="unit">mod</span></span>
                                <div style="display: flex; align-items: center;">
                                    <input type="text" class="value-display" id="randomStemMinValue" value="0.5" style="width: 45px;">
                                    <span style="color: var(--color-text-muted); margin: 0 6px;">–</span>
                                    <input type="text" class="value-display" id="randomStemMaxValue" value="2.0" style="width: 30px; text-align: left;">
                                </div>
                            </label>
                            <div id="randomStemRangeSlider" class="range-slider-container"></div>
                        </div>

                        <div class="control-group" id="randomControlGroup2" style="display: none; margin-top: var(--spacing-lg);">
                            <label>
                                <span>Strokes</span>
                                <div style="display: flex; align-items: center;">
                                    <input type="text" class="value-display" id="randomStrokesMinValue" value="1" style="width: 30px;">
                                    <span style="color: var(--color-text-muted); margin: 0 6px;">–</span>
                                    <input type="text" class="value-display" id="randomStrokesMaxValue" value="5" style="width: 30px; text-align: left;">
                                </div>
                            </label>
                            <div id="randomStrokesRangeSlider" class="range-slider-container"></div>
                        </div>

                        <div class="control-group" id="randomControlGroup3" style="display: none; margin-top: var(--spacing-lg);">
                            <label>
                                <span>Contrast</span>
                                <div style="display: flex; align-items: center;">
                                    <input type="text" class="value-display" id="randomContrastMinValue" value="0.1" style="width: 45px;">
                                    <span style="color: var(--color-text-muted); margin: 0 6px;">–</span>
                                    <input type="text" class="value-display" id="randomContrastMaxValue" value="8" style="width: 30px; text-align: left;">
                                </div>
                            </label>
                            <div id="randomContrastRangeSlider" class="range-slider-container"></div>
                        </div>

                        <div class="control-group" id="randomControlGroup5" style="display: none;">
                            <button type="button" class="btn-secondary" id="renewRandomBtn" style="width: 100%;">Renew</button>
                        </div>
                    </section>
                </div>
            </aside>

            <!-- View Panel (слева вверху) -->
            <aside class="controls-panel controls-panel-left" id="viewColorsPanel">
                <div class="panel-header" id="viewColorsPanelHeader">
                    <span>View</span>
                    <span class="collapse-icon">
                        <svg width="10" height="6" viewBox="0 0 12 8" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M1 1L6 6L11 1" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </span>
                </div>
                <div class="panel-content">
                    <!-- Letter Color -->
                    <div class="control-group">
                        <label>Letter Color</label>
                        <div id="letterColorPickerContainer"></div>
                    </div>

                    <!-- Background Color -->
                    <div class="control-group">
                        <label>Background</label>
                        <div id="bgColorPickerContainer"></div>
                    </div>

                    <!-- Grid Color -->
                    <div class="control-group" style="margin-top: var(--spacing-2xl);">
                        <label>Grid Color</label>
                        <div id="gridColorPickerContainer"></div>
                    </div>

                    <!-- Show Grid Toggle -->
                    <div class="control-group">
                        <label class="checkbox-label" for="showGridCheckbox">
                            <input type="checkbox" id="showGridCheckbox" checked>
                            <span>Show Grid</span>
                        </label>
                    </div>

                    <!-- Include Grid to Export Toggle -->
                    <div class="control-group">
                        <label class="checkbox-label" for="includeGridToExportCheckbox">
                            <input type="checkbox" id="includeGridToExportCheckbox">
                            <span>Include to export</span>
                        </label>
                    </div>

                </div>
            </aside>

            <!-- Text Input Panel (снизу слева) -->
            <aside class="controls-panel controls-panel-text" id="textPanel">
                <div class="panel-header" id="textPanelHeader">
                    <span>Text</span>
                    <span class="collapse-icon">
                        <svg width="10" height="6" viewBox="0 0 12 8" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M1 1L6 6L11 1" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </span>
                </div>
                <div class="panel-content">
                    <section class="control-section">
                        <div class="control-group">
                            <textarea id="textInput" rows="3" placeholder="Type your text here...">Void
Typeface
coded</textarea>
                        </div>
                    </section>

                    <section class="control-section">
                        <!-- Text Alignment Toggle -->
                        <fieldset>
                            <div class="segmented-control segmented-control-compact">
                                <input type="radio" name="textAlign" value="left" id="textAlignLeft">
                                <label for="textAlignLeft">Left</label>
                                
                                <input type="radio" name="textAlign" value="center" id="textAlignCenter" checked>
                                <label for="textAlignCenter">Center</label>
                                
                                <input type="radio" name="textAlign" value="right" id="textAlignRight">
                                <label for="textAlignRight">Right</label>
                            </div>
                        </fieldset>
                    </section>
                </div>
            </aside>
        </div>
    </div>

    <!-- Bottom Action Buttons -->
    <nav class="bottom-buttons">
        <button class="btn-fixed" id="copyBtn">Copy SVG</button>
        <button class="btn-fixed" id="exportBtn">Export SVG ⌘E</button>
        <button class="btn-fixed" id="renewBtn" style="display: none;">Renew</button>
    </nav>

    <script type="module" src="js/main.js"></script>
</body>
</html>
